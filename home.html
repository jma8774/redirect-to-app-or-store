<!DOCTYPE html>
<html>

<head>
  <script>

  function openRoon() {
    window.location.href = "roon://";
    this.timer = setTimeout(redirectToAppStore, 400);
  }

  function redirectToAppStore() {
    var userAgent = navigator.userAgent || navigator.vendor || window.opera;

    if (/android/i.test(userAgent)) {
      // User is using an Android device
      askToOpenAppStore('https://play.google.com/store/apps/details?id=com.roon.mobile')
    } else if (/iPad|iPhone|iPod/i.test(userAgent)) {
      // User is using an iOS device
      askToOpenAppStore('https://apps.apple.com/us/app/roon-remote/id1014764083')
    } else {
      console.log('You are not on an Android or iOS device, so we cannot take you to the app store')
    }
  }

  function askToOpenAppStore(url) {
    if (!document.hidden) {
      if (confirm('The app is not installed. Would you like to go to the app store?')) {
        window.location.href = url;
      }
    }
  }
  </script>
</head>

<body>
  <h2>Demo Redirecting</h2>

  <p>Try to open the Roon app, and if the app is not installed, it will redirect the user on mobile to the app store</p>
  <button type="button" onclick="openRoon()">Try it</button>
</body>

</html>